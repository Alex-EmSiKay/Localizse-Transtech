{% extends "transtech/layout.html" %}
{% block page %}
<div class="container-fluid p-1">
    <div class="row justify-content-left">
        <div class="col">
            <div class="row p-1">
                <div class="col-lg-2 align-self-start">
                    <h4>Personal</h4>
                </div>
                <div class="col-auto">
                    <table class="table table-striped">
                        <tbody>
                            <tr>
                                <th scope="row">Email:</th>
                                <td>
                                    {{user_email}}
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">Name:</th>
                                <td>
                                    {{user.first_name}}
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <div class="col-auto"><button class="btn btn-primary btn-sm">TODO Edit</button></div>
            </div>
            <div class="row p-1">
                <div class="col-lg-2 align-self-start">
                    <h4>Professional</h4>
                </div>
                <div class="col-auto">

                    <table class="table table-striped">
                        <tbody>
                            <tr>
                                <th scope="row">Position:</th>
                                <td>
                                    {% if request.user.is_staff %}Admin{% else %}{{request.user.groups.all.0.name}}{% endif %}
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">Status:</th>
                                <td>
                                    {% if user.is_active %}Active{% else %}Locked out{% endif %}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row p-1">
                <div class="col-lg-2 align-self-start">
                    <h4>Languages</h4>
                </div>
                <div class="col-auto">

                    <table class="table table-striped">
                        <tbody>
                            <tr>
                                <th scope="row">Primary:</th>
                                <td>
                                    {{primary_list|join:", "}}
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">Secondary:</th>
                                <td>
                                    {{secondary_list|join:", "}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-auto"><button class="btn btn-primary btn-sm">TODO Edit</button></div>
            </div>

            <div class="row p-1">
                <div class="col-lg-2 align-self-start">
                    <h4>Financial</h4>
                    <a href="#">TODO More financial details</a>
                </div>
                <div class="col-auto">
                    <table class="table table-striped">
                        <tbody>
                            <tr>
                                <th scope="row">Next weekly payment:</th>
                                <td>
                                    TODO ie $$
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">This financial year:</th>
                                <td>
                                    TODO ie $$
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid p-1">
    <div class="row p-1">
        <h4>Weekly Accuracy</h4>
    </div>
    <div class="row p-1">
        <div class="col-auto">
            <p>{{num_flagged}} out of {{num_audits}} audited items were flagged.</p>
            <p>This gives and accuracy rate of {{accuracy | stringformat:".2d"}}%</p>
            {% if accuracy >= 0.75 %}
            <p>Well done!</p>
            {% endif %}
        </div>
    </div>
</div>
<div class="container-fluid p-1">
    <div class="row p-1">
        <h4>Work log</h4>
    </div>
    <div class="row p-1">
        <div class="col-auto">
            <table class="table table-striped table-bordered text-center">
                <thead class=table-primary>
                    <th scope="col">Date/Time</th>
                    <th scope="col">Content ID</th>
                    <th scope="col">Language</th>
                    <th scope="col">Work Type</th>
                    <th scope="col">Price</th>
                </thead>
                <tbody>
                    {% for item in work_log %}
                    <tr>
                        <td>
                            {{item.done}}
                        </td>
                        <td>
                            {{item.content.content_id.pk}}
                        </td>
                        <td>
                            {{item.content.language}}
                        </td>
                        <td>
                            {% if item.work_type == "RE" %}Review{% endif %}{% if item.work_type == "AU" %}Audit{% endif %}
                        </td>
                        <td>
                            {% if item.work_type == "RE" %}15c{% endif %}{% if item.work_type == "AU" %}10c{% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            Latest 20 items shown. <a href="{% url 'log' %}">Full log</a>
        </div>
    </div>
</div>
{% endblock %}